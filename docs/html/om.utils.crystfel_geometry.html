<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="The exceptions Module" href="om.utils.exceptions.html" /><link rel="prev" title="The utils Package" href="om.utils.html" />

    <meta name="generator" content="sphinx-3.5.1, furo 2021.02.28.beta28"/>
        <title>The crystfel_geometry Module - om documentation</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=be5985a4059b5c2cd56ed0804790452beca62674">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">om  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/OMLogo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">om  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="om.html"> om</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="om.algorithms.html"> algorithms</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.algorithms.calibration_algorithms.html"> calibration_algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.algorithms.crystallography_algorithms.html"> crystallography_algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.algorithms.generic_algorithms.html"> generic_algorithms</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.data_retrieval_layer.html"> data_retrieval_layer</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.base.html"> base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.data_handlers_filesystem.html"> data_handlers_filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.data_handlers_hidra.html"> data_handlers_hidra</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.data_handlers_psana.html"> data_handlers_psana</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_cspad.html"> functions_cspad</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_epix10ka.html"> functions_epix10ka</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_jungfrau1M.html"> functions_jungfrau1M</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_jungfrau4M.html"> functions_jungfrau4M</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_pilatus.html"> functions_pilatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_psana.html"> functions_psana</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.graphical_interfaces.html"> graphical_interfaces</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.base.html"> base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.crystallography_frame_viewer.html"> crystallography_frame_viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.crystallography_gui.html"> crystallography_gui</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.crystallography_parameter_tweaker.html"> crystallography_parameter_tweaker</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.lib.html"> lib</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.lib.peakfinder8_extension.html"> peakfinder8_extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="om.monitor.html"> monitor</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.parallelization_layer.html"> parallelization_layer</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.parallelization_layer.base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.parallelization_layer.mpi.html">mpi</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.processing_layer.html"> processing_layer</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.processing_layer.base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.processing_layer.crystallography.html">crystallography</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="om.utils.html"> utils</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">crystfel_geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.exceptions.html">exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.parameters.html">parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.zmq_gui.html">zmq_gui</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.zmq_monitor.html">zmq_monitor</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="module-om.utils.crystfel_geometry">
<span id="the-crystfel-geometry-module"></span><h1>The crystfel_geometry Module<a class="headerlink" href="#module-om.utils.crystfel_geometry" title="Permalink to this headline">¶</a></h1>
<p>CrystFEL’s geometry utilities.</p>
<p>This module contains functions that manipulate geometry data encoded with the format
used by the CrystFEL software package.</p>
<dl class="py class">
<dt id="om.utils.crystfel_geometry.TypeBeam">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TypeBeam</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBeam" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A dictionary storing information about the x-ray beam.</p>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBeam.photon_energy">
<code class="sig-name descname"><span class="pre">photon_energy</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBeam.photon_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>The photon energy of the beam in eV.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBeam.photon_energy_from">
<code class="sig-name descname"><span class="pre">photon_energy_from</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBeam.photon_energy_from" title="Permalink to this definition">¶</a></dt>
<dd><p>The location of the photon energy information in an HDF5 data file, in case the
beam energy information is extracted from a file.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBeam.photon_energy_scale">
<code class="sig-name descname"><span class="pre">photon_energy_scale</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBeam.photon_energy_scale" title="Permalink to this definition">¶</a></dt>
<dd><p>The scaling factor to be applied to the photon energy, in case the provided energy
value is not in eV.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="om.utils.crystfel_geometry.TypePanel">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TypePanel</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A dictionary storing information about detector panels.</p>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.cnx">
<code class="sig-name descname"><span class="pre">cnx</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.cnx" title="Permalink to this definition">¶</a></dt>
<dd><p>The x location of the corner of the panel in the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.cny">
<code class="sig-name descname"><span class="pre">cny</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.cny" title="Permalink to this definition">¶</a></dt>
<dd><p>The y location of the corner of the panel in the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.clen">
<code class="sig-name descname"><span class="pre">clen</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.clen" title="Permalink to this definition">¶</a></dt>
<dd><p>The distance, as reported by the facility, of the sample interaction point from the
corner of the first pixel in the panel.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.clen_from">
<code class="sig-name descname"><span class="pre">clen_from</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.clen_from" title="Permalink to this definition">¶</a></dt>
<dd><p>The location of the ‘clen’ information in an HDF5 data file, in case the detector
distance is extracted from a file.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.coffset">
<code class="sig-name descname"><span class="pre">coffset</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.coffset" title="Permalink to this definition">¶</a></dt>
<dd><p>The offset to be applied to the nominal clen value reported by the facility in
order to determine the real distance of the panel from the interaction point.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.mask">
<code class="sig-name descname"><span class="pre">mask</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.mask" title="Permalink to this definition">¶</a></dt>
<dd><p>The location of the mask data for the panel in an HDF5 data file.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.mask_file">
<code class="sig-name descname"><span class="pre">mask_file</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.mask_file" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the HDF5 data file in which the mask data for the panel can be found.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.satmap">
<code class="sig-name descname"><span class="pre">satmap</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.satmap" title="Permalink to this definition">¶</a></dt>
<dd><p>The location of the per-pixel saturation map for the panel in an HDF5 data file.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.satmap_file">
<code class="sig-name descname"><span class="pre">satmap_file</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.satmap_file" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the HDF5 data file in which the per-pixel saturation map for the panel
can be found.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.res">
<code class="sig-name descname"><span class="pre">res</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.res" title="Permalink to this definition">¶</a></dt>
<dd><p>The resolution of the panel in pixels per meter.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.badrow">
<code class="sig-name descname"><span class="pre">badrow</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.badrow" title="Permalink to this definition">¶</a></dt>
<dd><p>The readout direction for the panel, for filtering out clusters of peaks. The value
corresponding to this key is either ‘x’ or ‘y’.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.no_index">
<code class="sig-name descname"><span class="pre">no_index</span></code><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.no_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Wether the panel should be considered entirely bad. The panel will be considered
bad if the value corresponding to this key is non-zero.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.adu_per_photon">
<code class="sig-name descname"><span class="pre">adu_per_photon</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.adu_per_photon" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of detector intensity units per photon for the panel.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.max_adu">
<code class="sig-name descname"><span class="pre">max_adu</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.max_adu" title="Permalink to this definition">¶</a></dt>
<dd><p>The detector intensity unit value above which a pixel of the panel should be
considered unreliable.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.data">
<code class="sig-name descname"><span class="pre">data</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The location, in an HDF5 data file, of the data block where the panel data is
stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.adu_per_eV">
<code class="sig-name descname"><span class="pre">adu_per_eV</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.adu_per_eV" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of detector intensity units per eV of photon energy for the panel.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.dim_structure">
<code class="sig-name descname"><span class="pre">dim_structure</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.dim_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>A description of the layout of the data block for the panel. The value
corresponding to this key is a list of strings describing the meaning of each axis
in the data block. See the <a class="reference external" href="http://www.desy.de/~twhite/crystfel/manual-crystfel_geometry.html">crystfel_geometry</a> man page for
a detailed explanation.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.fsx">
<code class="sig-name descname"><span class="pre">fsx</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.fsx" title="Permalink to this definition">¶</a></dt>
<dd><p>The fs-&gt;x component of the matrix used to transform pixel indexes into detector
reference system coordinates.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.fsy">
<code class="sig-name descname"><span class="pre">fsy</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.fsy" title="Permalink to this definition">¶</a></dt>
<dd><p>The fs-&gt;y component of the matrix used to transform pixel indexes into detector
reference system coordinates.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.fsz">
<code class="sig-name descname"><span class="pre">fsz</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.fsz" title="Permalink to this definition">¶</a></dt>
<dd><p>The fs-&gt;z component of the matrix used to transform pixel indexes into detector
reference system coordinates.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.ssx">
<code class="sig-name descname"><span class="pre">ssx</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.ssx" title="Permalink to this definition">¶</a></dt>
<dd><p>The ss-&gt;x component of the matrix used to transform pixel indexes into detector
reference system coordinates.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.ssy">
<code class="sig-name descname"><span class="pre">ssy</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.ssy" title="Permalink to this definition">¶</a></dt>
<dd><p>The ss-&gt;y component of the matrix used to transform pixel indexes into detector
reference system coordinates.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.ssz">
<code class="sig-name descname"><span class="pre">ssz</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.ssz" title="Permalink to this definition">¶</a></dt>
<dd><p>The ss-&gt;z component of the matrix used to transform pixel indexes into detector
reference system coordinates.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.rail_x">
<code class="sig-name descname"><span class="pre">rail_x</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.rail_x" title="Permalink to this definition">¶</a></dt>
<dd><p>The x component, in the detector reference system, of the direction of the rail
along which the detector moves.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.rail_y">
<code class="sig-name descname"><span class="pre">rail_y</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.rail_y" title="Permalink to this definition">¶</a></dt>
<dd><p>The y component, in the detector reference system, of the direction of the rail
along which the detector moves.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.rail_z">
<code class="sig-name descname"><span class="pre">rail_z</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.rail_z" title="Permalink to this definition">¶</a></dt>
<dd><p>The z component, in the detector reference system, of the direction of the rail
along which the detector moves.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.clen_for_centering">
<code class="sig-name descname"><span class="pre">clen_for_centering</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.clen_for_centering" title="Permalink to this definition">¶</a></dt>
<dd><p>The distance from the interation point, as reported by the facility, of the origin
of the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.xfs">
<code class="sig-name descname"><span class="pre">xfs</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.xfs" title="Permalink to this definition">¶</a></dt>
<dd><p>The x-&gt;fs component of the matrix used to transform detector reference system
coordinates into pixel indexes.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.yfs">
<code class="sig-name descname"><span class="pre">yfs</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.yfs" title="Permalink to this definition">¶</a></dt>
<dd><p>The y-&gt;fs component of the matrix used to transform detector reference system
coordinates into pixel indexes.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.xss">
<code class="sig-name descname"><span class="pre">xss</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.xss" title="Permalink to this definition">¶</a></dt>
<dd><p>The x-&gt;ss component of the matrix used to transform detector reference system
coordinates into pixel indexes.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.yss">
<code class="sig-name descname"><span class="pre">yss</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.yss" title="Permalink to this definition">¶</a></dt>
<dd><p>The y-&gt;ss component of the matrix used to transform detector reference system
coordinates into pixel indexes.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.orig_min_fs">
<code class="sig-name descname"><span class="pre">orig_min_fs</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.orig_min_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial fs index of the panel data in the data block where it is stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.orig_max_fs">
<code class="sig-name descname"><span class="pre">orig_max_fs</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.orig_max_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>The final (inclusive) fs index of the panel data in the data block where it is
stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.orig_min_ss">
<code class="sig-name descname"><span class="pre">orig_min_ss</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.orig_min_ss" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial ss index of the panel data in the data block where it is stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.orig_max_ss">
<code class="sig-name descname"><span class="pre">orig_max_ss</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.orig_max_ss" title="Permalink to this definition">¶</a></dt>
<dd><p>The final (inclusive) fs index of the panel data in the data block where it is
stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.w">
<code class="sig-name descname"><span class="pre">w</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.w" title="Permalink to this definition">¶</a></dt>
<dd><p>The width of the panel in pixels.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePanel.h">
<code class="sig-name descname"><span class="pre">h</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePanel.h" title="Permalink to this definition">¶</a></dt>
<dd><p>The height of the panel in pixels.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="om.utils.crystfel_geometry.TypeBadRegion">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TypeBadRegion</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A dictionary storing information about bad regions in a detector.</p>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.panel">
<code class="sig-name descname"><span class="pre">panel</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.panel" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the panel in which the bad region lies.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.min_x">
<code class="sig-name descname"><span class="pre">min_x</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.min_x" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial x coordinate of the bad region in the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.max_x">
<code class="sig-name descname"><span class="pre">max_x</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.max_x" title="Permalink to this definition">¶</a></dt>
<dd><p>The final x coordinate of the bad region in the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.min_y">
<code class="sig-name descname"><span class="pre">min_y</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.min_y" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial y coordinate of the bad region in the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.max_y">
<code class="sig-name descname"><span class="pre">max_y</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.max_y" title="Permalink to this definition">¶</a></dt>
<dd><p>The final y coordinate of the bad region in the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.min_fs">
<code class="sig-name descname"><span class="pre">min_fs</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.min_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial fs index of the bad region in the block where the panel data is stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.max_fs">
<code class="sig-name descname"><span class="pre">max_fs</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.max_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>The final (inclusive) fs index of the bad region in the block where the panel data
is stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.min_ss">
<code class="sig-name descname"><span class="pre">min_ss</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.min_ss" title="Permalink to this definition">¶</a></dt>
<dd><p>The initial ss index of the bad region in the block where the panel data is stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.max_ss">
<code class="sig-name descname"><span class="pre">max_ss</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.max_ss" title="Permalink to this definition">¶</a></dt>
<dd><p>The final (inclusive) ss index of the bad region in the block where the panel data
is stored.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeBadRegion.is_fsss">
<code class="sig-name descname"><span class="pre">is_fsss</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeBadRegion.is_fsss" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the fs,ss definition of the bad region (as opposed to the x,y-based one)
should be considered. If the value corresponding to this key is 1, the fs,ss-based
definition of the bad region is considered the valid one. Otherwise, the definition
in x,y coordinates is taken as valid.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="om.utils.crystfel_geometry.TypeDetector">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TypeDetector</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A dictionary storing information about a detector.</p>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.panels">
<code class="sig-name descname"><span class="pre">panels</span></code><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#om.utils.crystfel_geometry.TypePanel" title="om.utils.crystfel_geometry.TypePanel"><span class="pre">om.utils.crystfel_geometry.TypePanel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.panels" title="Permalink to this definition">¶</a></dt>
<dd><p>The panels in the detector. The value corresponding to this key is a dictionary
containing information about the panels that make up the detector. In the
dictionary, the keys are the panel names, and the values are <a class="reference internal" href="#om.utils.crystfel_geometry.TypePanel" title="om.utils.crystfel_geometry.TypePanel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypePanel</span></code></a>
dictionaries.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.bad">
<code class="sig-name descname"><span class="pre">bad</span></code><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#om.utils.crystfel_geometry.TypeBadRegion" title="om.utils.crystfel_geometry.TypeBadRegion"><span class="pre">om.utils.crystfel_geometry.TypeBadRegion</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.bad" title="Permalink to this definition">¶</a></dt>
<dd><p>The bad regions in the detector. The value corresponding to this key is a
dictionary containing information about the bad regions in the detector. In the
dictionary, the keys are the bad region names, and the values are additional
<a class="reference internal" href="#om.utils.crystfel_geometry.TypeBadRegion" title="om.utils.crystfel_geometry.TypeBadRegion"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeBadRegion</span></code></a> dictionaries.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.mask_bad">
<code class="sig-name descname"><span class="pre">mask_bad</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.mask_bad" title="Permalink to this definition">¶</a></dt>
<dd><p>The value used in a bad pixel mask to label a pixel as bad.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.mask_good">
<code class="sig-name descname"><span class="pre">mask_good</span></code><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.mask_good" title="Permalink to this definition">¶</a></dt>
<dd><p>The value used in a bad pixel mask to label a pixel as good.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.rigid_groups">
<code class="sig-name descname"><span class="pre">rigid_groups</span></code><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.rigid_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>The rigid groups of panels in the detector. The value corresponding to this key is
a dictionary containing information about the rigid groups. In the dictionary, the
keys are the names of the rigid groups and the values are lists storing the names
of the panels belonging to each group.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.rigid_group_collections">
<code class="sig-name descname"><span class="pre">rigid_group_collections</span></code><em class="property"><span class="pre">:</span> <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.rigid_group_collections" title="Permalink to this definition">¶</a></dt>
<dd><p>The collections of rigid groups of panels in the detector. The value corresponding
to this key is a dictionary containing information about the rigid group
collections. In the dictionary, the keys are the names of the rigid group
collections and the values are lists storing the names of the rigid groups
belonging to the collections.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.furthest_out_panel">
<code class="sig-name descname"><span class="pre">furthest_out_panel</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.furthest_out_panel" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the panel where the furthest away pixel from the center of the
detector reference system can be found.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.furthest_out_fs">
<code class="sig-name descname"><span class="pre">furthest_out_fs</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.furthest_out_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>The fs coordinate, within its panel, of the furthest away pixel from the center of
the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.furthest_out_ss">
<code class="sig-name descname"><span class="pre">furthest_out_ss</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.furthest_out_ss" title="Permalink to this definition">¶</a></dt>
<dd><p>The ss coordinate, within its panel, of the furthest away pixel from the center of
the detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.furthest_in_panel">
<code class="sig-name descname"><span class="pre">furthest_in_panel</span></code><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.furthest_in_panel" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the panel where the closest pixel to the center of the detector
reference system can be found.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.furthest_in_fs">
<code class="sig-name descname"><span class="pre">furthest_in_fs</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.furthest_in_fs" title="Permalink to this definition">¶</a></dt>
<dd><p>The fs coordinate, within its panel, of the closest pixel to the center of the
detector reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypeDetector.furthest_in_ss">
<code class="sig-name descname"><span class="pre">furthest_in_ss</span></code><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypeDetector.furthest_in_ss" title="Permalink to this definition">¶</a></dt>
<dd><p>The ss coordinate, within its panel, of the closest pixel to the center of the
detector reference system.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="om.utils.crystfel_geometry.TypePixelMaps">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">TypePixelMaps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.TypePixelMaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A dictionary storing a set of pixel maps.</p>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePixelMaps.x">
<code class="sig-name descname"><span class="pre">x</span></code><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePixelMaps.x" title="Permalink to this definition">¶</a></dt>
<dd><p>A pixel map for the x coordinate.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePixelMaps.y">
<code class="sig-name descname"><span class="pre">y</span></code><em class="property"><span class="pre">:</span> <span class="pre">numpy.ndarray</span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePixelMaps.y" title="Permalink to this definition">¶</a></dt>
<dd><p>A pixel map for the y coordinate.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePixelMaps.z">
<code class="sig-name descname"><span class="pre">z</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePixelMaps.z" title="Permalink to this definition">¶</a></dt>
<dd><p>A pixel map for the z coordinate.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePixelMaps.radius">
<code class="sig-name descname"><span class="pre">radius</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePixelMaps.radius" title="Permalink to this definition">¶</a></dt>
<dd><p>A pixel map storing the distance of each pixel from the center of the detector
reference system.</p>
</dd></dl>
<dl class="py attribute">
<dt id="om.utils.crystfel_geometry.TypePixelMaps.phi">
<code class="sig-name descname"><span class="pre">phi</span></code><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#om.utils.crystfel_geometry.TypePixelMaps.phi" title="Permalink to this definition">¶</a></dt>
<dd><p>A pixel map storing, for each pixel, the amplitude of the angle drawn by the pixel,
the center of the detector reference system, and the x axis.</p>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="om.utils.crystfel_geometry.load_crystfel_geometry">
<code class="sig-name descname"><span class="pre">load_crystfel_geometry</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.load_crystfel_geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a CrystFEL geometry file.</p>
<p>This function is a re-implementation of the get_detector_geometry_2 function from
CrystFEL. It reads information from a CrystFEL geometry file, which uses a
key/value language format, fully documented in the relevant
<a class="reference external" href="http://www.desy.de/~twhite/crystfel/manual-crystfel_geometry.html">man page</a>.
This function returns a set of nested dictionaries whose content matches CrystFEL’s
internal representation of the information in the file (see the
libcrystfel/src/detector.h and the libcrystfel/src/image.c files from CrystFEL’s
source code for more information).</p>
<p>The code of this function is currently synchronized with the code of the function
‘get_detector_geometry_2’ in CrystFEL at commit cff9159b4bc6.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the absolute or relative path to a CrystFEL geometry file.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference internal" href="#om.utils.crystfel_geometry.TypeDetector" title="om.utils.crystfel_geometry.TypeDetector"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDetector</span></code></a>, <a class="reference internal" href="#om.utils.crystfel_geometry.TypeBeam" title="om.utils.crystfel_geometry.TypeBeam"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeBeam</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A tuple with the information loaded from the file.</p>
<ul class="simple">
<li><p>The first entry in the tuple is a <a class="reference internal" href="#om.utils.crystfel_geometry.TypeDetector" title="om.utils.crystfel_geometry.TypeDetector"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDetector</span></code></a> dictionary storing
information related to the detector geometry.</p></li>
<li><p>The second entry in the tuple is a <a class="reference internal" href="#om.utils.crystfel_geometry.TypeBeam" title="om.utils.crystfel_geometry.TypeBeam"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeBeam</span></code></a> dictionary storing the
beam properties.</p></li>
<li><p>The third entry is the location, within an HDF5 file, where Bragg peak
information for the current detector can be found. If the CrystFEL geometry
file does not provide this last piece information, this entry has the value
of an empty string.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="om.utils.crystfel_geometry.compute_pix_maps">
<code class="sig-name descname"><span class="pre">compute_pix_maps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.compute_pix_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pixel maps from CrystFEL geometry information.</p>
<p>This function takes as input the geometry information read from a <a class="reference external" href="http://www.desy.de/~twhite/crystfel/manual-crystfel_geometry.html">CrystFEL</a> geometry
file, and returns a set of pre-computed pixel maps.</p>
<p>The origin and the orientation of the reference system for the pixel maps are set
according to conventions used by CrystFEL:</p>
<ul class="simple">
<li><p>The center of the reference system is the beam interaction point.</p></li>
<li><p>+z is the beam direction, and points along the beam (i.e. away from the source).</p></li>
<li><p>+y points towards the zenith (ceiling).</p></li>
<li><p>+x completes the right-handed coordinate system.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geometry</strong> (<a class="reference internal" href="#om.utils.crystfel_geometry.TypeDetector" title="om.utils.crystfel_geometry.TypeDetector"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDetector</span></code></a>) – A dictionary returned by the <a class="reference internal" href="#om.utils.crystfel_geometry.load_crystfel_geometry" title="om.utils.crystfel_geometry.load_crystfel_geometry"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_crystfel_geometry()</span></code></a> function,
storing the detector geometry information.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#om.utils.crystfel_geometry.TypePixelMaps" title="om.utils.crystfel_geometry.TypePixelMaps"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypePixelMaps</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary storing the the pixel maps.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="om.utils.crystfel_geometry.compute_visualization_pix_maps">
<code class="sig-name descname"><span class="pre">compute_visualization_pix_maps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.compute_visualization_pix_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes pixel maps for data visualization from CrystFEL geometry information.</p>
<p>This function takes as input the geometry information read from a <a class="reference external" href="http://www.desy.de/~twhite/crystfel/manual-crystfel_geometry.html">CrystFEL</a> geometry
file, and returns a set of pre-computed pixel maps that can be used to display data
in a Qt ImageView widget (from the <a class="reference external" href="http://pyqtgraph.org/">PyQtGraph</a> library).</p>
<p>These pixel maps are different from the ones generated by the
<a class="reference internal" href="#om.utils.crystfel_geometry.compute_pix_maps" title="om.utils.crystfel_geometry.compute_pix_maps"><code class="xref py py-func docutils literal notranslate"><span class="pre">compute_pix_maps()</span></code></a> function. The main differences are:</p>
<ul class="simple">
<li><p>The origin of the reference system is not the beam interaction point, but the top
left corner of the array used to visualize the data.</p></li>
<li><p>Only the x and y pixel maps are available. The other keys in the retruned typed
dictionary (z, r and phi) have a value of None.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geometry</strong> (<a class="reference internal" href="#om.utils.crystfel_geometry.TypeDetector" title="om.utils.crystfel_geometry.TypeDetector"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDetector</span></code></a>) – A dictionary returned by the <a class="reference internal" href="#om.utils.crystfel_geometry.load_crystfel_geometry" title="om.utils.crystfel_geometry.load_crystfel_geometry"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_crystfel_geometry()</span></code></a> function,
storing the detector geometry information.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#om.utils.crystfel_geometry.TypePixelMaps" title="om.utils.crystfel_geometry.TypePixelMaps"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypePixelMaps</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary storing the the pixel maps. Only the values corresponding to the
‘x’ and ‘y’ keys are defined. All other dictionary values are set to None.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="om.utils.crystfel_geometry.apply_geometry_to_data">
<code class="sig-name descname"><span class="pre">apply_geometry_to_data</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.utils.crystfel_geometry.apply_geometry_to_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies CrystFEL geometry information to some data.</p>
<p>This function takes as input the geometry information read from a <a class="reference external" href="http://www.desy.de/~twhite/crystfel/manual-crystfel_geometry.html">CrystFEL</a> geometry
file, and some data on which the geometry information should be applied. It returns
an array that can be displayed using libraries like
<a class="reference external" href="https://matplotlib.org/">matplotlib</a> or <a class="reference external" href="http://pyqtgraph.org/">PyQtGraph</a>.</p>
<p>The shape of the returned array is big enough to display all the pixel values in
the input data, and is symmetric around the center of the detector reference system
(i.e: the beam interaction point).</p>
<p>These restrictions often cause the returned array to be bigger than the minimum
size needed to store the physical layout of the pixels in the detector,
particularly if the detector is not centered at the beam interaction point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – The data on which the geometry information should be applied.</p></li>
<li><p><strong>geometry</strong> (<a class="reference internal" href="#om.utils.crystfel_geometry.TypeDetector" title="om.utils.crystfel_geometry.TypeDetector"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDetector</span></code></a>) – A dictionary storing the detector geometry information.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An array containing the data with the geometry information applied.</p>
</dd>
</dl>
</dd></dl>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="om.utils.exceptions.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">The exceptions Module</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="om.utils.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">The utils Package</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Author
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/om.utils.crystfel_geometry.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>