<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="The monitor Module" href="om.monitor.html" /><link rel="prev" title="The lib Pakcage" href="om.lib.html" />

    <meta name="generator" content="sphinx-3.5.1, furo 2021.02.28.beta28"/>
        <title>The peakfinder8_extension Module - om documentation</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=be5985a4059b5c2cd56ed0804790452beca62674">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">om  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/OMLogo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">om  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Content:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="om.html"> om</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="om.algorithms.html"> algorithms</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.algorithms.calibration_algorithms.html"> calibration_algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.algorithms.crystallography_algorithms.html"> crystallography_algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.algorithms.generic_algorithms.html"> generic_algorithms</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.data_retrieval_layer.html"> data_retrieval_layer</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.base.html"> base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.data_handlers_filesystem.html"> data_handlers_filesystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.data_handlers_hidra.html"> data_handlers_hidra</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.data_handlers_psana.html"> data_handlers_psana</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_cspad.html"> functions_cspad</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_epix10ka.html"> functions_epix10ka</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_jungfrau1M.html"> functions_jungfrau1M</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_jungfrau4M.html"> functions_jungfrau4M</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_pilatus.html"> functions_pilatus</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.data_retrieval_layer.functions_psana.html"> functions_psana</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.graphical_interfaces.html"> graphical_interfaces</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.base.html"> base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.crystallography_frame_viewer.html"> crystallography_frame_viewer</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.crystallography_gui.html"> crystallography_gui</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.graphical_interfaces.crystallography_parameter_tweaker.html"> crystallography_parameter_tweaker</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="om.lib.html"> lib</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#"> peakfinder8_extension</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="om.monitor.html"> monitor</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.parallelization_layer.html"> parallelization_layer</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.parallelization_layer.base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.parallelization_layer.mpi.html">mpi</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.processing_layer.html"> processing_layer</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.processing_layer.base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.processing_layer.crystallography.html">crystallography</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="om.utils.html"> utils</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="om.utils.crystfel_geometry.html">crystfel_geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.exceptions.html">exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.parameters.html">parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.zmq_gui.html">zmq_gui</a></li>
<li class="toctree-l3"><a class="reference internal" href="om.utils.zmq_monitor.html">zmq_monitor</a></li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="module-om.lib.peakfinder8_extension">
<span id="the-peakfinder8-extension-module"></span><h1>The peakfinder8_extension Module<a class="headerlink" href="#module-om.lib.peakfinder8_extension" title="Permalink to this headline">¶</a></h1>
<p>Peakfinder8 extension.</p>
<p>This extension contains an implementation of Cheetah’s ‘peakfinder8’ peak detection
algorithm.</p>
<dl class="py function">
<dt id="om.lib.peakfinder8_extension.peakfinder_8">
<code class="sig-name descname"><span class="pre">peakfinder_8</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_num_peaks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pix_r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asic_nx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asic_ny</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nasics_x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nasics_y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adc_thresh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitfinder_min_snr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitfinder_min_pix_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitfinder_max_pix_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitfinder_local_bg_radius</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#om.lib.peakfinder8_extension.peakfinder_8" title="Permalink to this definition">¶</a></dt>
<dd><p>Peakfinder8 peak detection.</p>
<p>This function finds peaks in a detector data frame using the ‘peakfinder8’
strategy from the Cheetah software package. The ‘peakfinder8’ peak detection
strategy is described in the following publication:</p>
<p>A. Barty, R. A. Kirian, F. R. N. C. Maia, M. Hantke, C. H. Yoon, T. A. White,
and H. N. Chapman, “Cheetah: software for high-throughput reduction and
analysis of serial femtosecond x-ray diffraction data”, J Appl  Crystallogr,
vol. 47, pp. 1118-1131 (2014).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_num_peaks</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The maximum number of peaks that will be retrieved
from each data frame. Additional peaks will be ignored.</p></li>
<li><p><strong>data</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – The detector data frame on which the peak finding
must be performed (as an numpy array of float32).</p></li>
<li><p><strong>mask</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – <p>A numpy array of int8 storing a mask.  The map can
be used to mark areas of the data frame that must be excluded from the peak
search.</p>
<ul>
<li><p>The map must be a numpy array of the same shape as the data frame on
which the algorithm will be applied.</p></li>
<li><p>Each pixel in the map must have a value of either 0, meaning that
the corresponding pixel in the data frame should be ignored, or 1,
meaning that the corresponding pixel should be included in the
search.</p></li>
<li><p>The map is only used to exclude areas from the peak search: the data
is not modified in any way.</p></li>
</ul>
</p></li>
<li><p><strong>pix_r</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>) – <p>A numpy array of float32 with radius information.</p>
<ul>
<li><p>The array must have the same shape as the data frame on which the
algorithm will be applied.</p></li>
<li><p>Each element of the array must store, for the corresponding pixel in the
data frame, the distance in pixels from the origin of the detector
reference system (usually the center of the detector).</p></li>
</ul>
</p></li>
<li><p><strong>asic_nx</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – frame.</p></li>
<li><p><strong>asic_ny</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – frame.</p></li>
<li><p><strong>nasics_x</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The number of panels along the fs axis of the data
frame.</p></li>
<li><p><strong>nasics_y</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The number of panels along the ss axis of the data
frame.</p></li>
<li><p><strong>adc_thresh</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>) – </p></li>
<li><p><strong>hitfinder_min_snr</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>) – The minimum signal-to-noise ratio for peak
detection.</p></li>
<li><p><strong>hitfinder_min_pix_count</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The minimum size of a peak in pixels.</p></li>
<li><p><strong>hitfinder_max_pixel_count</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The maximum size of a peak in pixels.</p></li>
<li><p><strong>local_bg_radius</strong> – The radius for the estimation of the local background in
pixels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A tuple storing  information about the detected peaks. The
tuple has the following elements:</p>
<ul class="simple">
<li><p>The first entry stores the number of peaks that were detected in the data
frame.</p></li>
<li><p>The second entry is a list storing the fractional fs indexes that locate the
detected peaks in the data frame.</p></li>
<li><p>The third entry is a list storing the fractional ss indexes that locate the
the detected peaks in the data frame.</p></li>
<li><p>The fourth entry is a list storing the integrated intensities for the
detected peaks.</p></li>
<li><p>The fifth entry is a list storing the number of pixels that make up each
detected peak.</p></li>
<li><p>The sixth entry is a list storing, for each peak, the value of the pixel with
the maximum intensity.</p></li>
<li><p>The seventh entry is a list storing the signal-to-noise ratio of each
detected peak.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Tuple[int,</span> <span class="pre">List[float],</span> <span class="pre">List[float],</span> <span class="pre">List[float],</span> <span class="pre">List[float],</span> <span class="pre">List[float],</span> <span class="pre">List[float]</span></code></p>
</dd>
</dl>
</dd></dl>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="om.monitor.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">The monitor Module</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="om.lib.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">The lib Pakcage</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Author
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/om.lib.peakfinder8_extension.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>